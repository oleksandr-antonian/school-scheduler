import{u as T,r as v,c,a as d,b as s,w as a,F as N,f as r,g as u,j as h,t as S}from"./index-Dtl9JuOv.js";import{u as L}from"./subjectStore-DlpApQk3.js";import{u as F}from"./teacherStore-Ckj62ZiQ.js";import{u as W}from"./classStore-nkQvzh8J.js";import{v as q}from"./v4-C6aID195.js";const K={class:"flex items-center justify-between"},M={key:0,class:"card"},A={key:0,class:"flex items-center justify-end gap-3"},G={key:1,class:"flex items-center justify-end gap-3"},H={key:1},J={key:0,class:"flex items-center flex-col bg-gray-100 my-8 rounded p-8"},O={class:"flex items-center gap-3"},Q={key:1,class:"flex items-center flex-col bg-gray-100 my-8 rounded p-8"},oe={__name:"SubjectListView",setup(X){const V=T(),p=L(),y=F(),_=W(),g=v(p.subjects),j=v(y.teachers),w=v(_.classes),m=v([]),b=(l,t=!0)=>{m.value=t?[...m.value,p.subjects.find(i=>i.id===l)]:m.value.filter(i=>i.id!==l)},x=({newData:l,index:t})=>{p.updateSubject(t,l),b(l.id,!1)},I=({data:l})=>{b(l.id,!1)},P=l=>b(l.id),k=()=>{const l={id:q(),name:"",lessonsPerWeek:1,teacherId:null,classId:null};p.addSubject(l),b(l.id)},U=(l,t)=>{V.require({target:l.target,message:`Ви впевнені, що хочете видалити предмет "${t.name}"?`,icon:"pi pi-exclamation-triangle",rejectProps:{label:"Ні",severity:"secondary",outlined:!0},acceptProps:{label:"Так"},accept:()=>z(t.id)})},z=l=>{const t=p.subjects.findIndex(i=>i.id===l);t!==-1&&p.removeSubject(t),b(l,!1)},$=l=>m.value.some(t=>t.id===l);return(l,t)=>{const i=r("Button"),R=r("InputText"),f=r("Column"),E=r("InputNumber"),C=r("Select"),B=r("ConfirmPopup"),D=r("DataTable");return u(),c(N,null,[d("div",K,[t[3]||(t[3]=d("h1",{class:"text-2xl font-bold"},"Предмети",-1)),s(i,{onClick:k,icon:"pi pi-plus",label:"Додати предмет",iconPos:"right",size:"small"})]),g.value.length?(u(),c("div",M,[s(D,{editingRows:m.value,"onUpdate:editingRows":t[0]||(t[0]=e=>m.value=e),value:g.value,editMode:"row",dataKey:"id"},{default:a(()=>[s(f,{field:"name",header:"Назва предмету",style:{width:"20%"}},{editor:a(({data:e,field:o})=>[s(R,{modelValue:e[o],"onUpdate:modelValue":n=>e[o]=n,placeholder:"Введіть назву предмету",fluid:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),s(f,{field:"lessonsPerWeek",header:"Уроків на тиждень",style:{width:"20%"}},{editor:a(({data:e,field:o})=>[s(E,{modelValue:e[o],"onUpdate:modelValue":n=>e[o]=n,placeholder:"Уроків на тиждень",min:"1",fluid:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),s(f,{field:"teacherId",header:"Вчитель",style:{width:"20%"}},{editor:a(({data:e,field:o})=>[s(C,{modelValue:e[o],"onUpdate:modelValue":n=>e[o]=n,options:h(y).teachers,optionLabel:"name",optionValue:"id",placeholder:"Виберіть вчителя",fluid:""},null,8,["modelValue","onUpdate:modelValue","options"])]),body:a(({data:e})=>{var o;return[d("span",null,S((o=h(y).teachers.find(n=>n.id===e.teacherId))==null?void 0:o.name),1)]}),_:1}),s(f,{field:"classId",header:"Клас",style:{width:"20%"}},{editor:a(({data:e,field:o})=>[s(C,{modelValue:e[o],"onUpdate:modelValue":n=>e[o]=n,options:h(_).classes,optionLabel:"name",optionValue:"id",placeholder:"Виберіть клас",fluid:""},null,8,["modelValue","onUpdate:modelValue","options"])]),body:a(({data:e})=>{var o;return[d("span",null,S((o=h(_).classes.find(n=>n.id===e.classId))==null?void 0:o.name),1)]}),_:1}),s(f,{header:"",style:{width:"20%","text-align":"center"}},{body:a(({data:e,index:o})=>[$(e.id)?(u(),c("div",G,[s(i,{onClick:n=>x({newData:e,index:o}),severity:"secondary",icon:"pi pi-check",size:"small","aria-label":"Save"},null,8,["onClick"]),s(i,{onClick:n=>I({data:e}),severity:"secondary",icon:"pi pi-times",size:"small","aria-label":"Cancel"},null,8,["onClick"])])):(u(),c("div",A,[s(B),s(i,{onClick:n=>P(e),severity:"secondary",icon:"pi pi-pencil",size:"small","aria-label":"Edit"},null,8,["onClick"]),s(i,{onClick:n=>U(n,e),severity:"secondary",icon:"pi pi-trash",size:"small","aria-label":"Delete"},null,8,["onClick"])]))]),_:1})]),_:1},8,["editingRows","value"])])):(u(),c("div",H,[!j.value.length||!w.value.length?(u(),c("div",J,[t[4]||(t[4]=d("p",{class:"mb-4"},"Додайте вчителів та класи, щоб додати предмети",-1)),d("div",O,[s(i,{onClick:t[1]||(t[1]=e=>l.$router.push("/teachers")),icon:"pi pi-plus",label:"Додати вчителя",iconPos:"right",size:"small"}),s(i,{onClick:t[2]||(t[2]=e=>l.$router.push("/classes")),icon:"pi pi-plus",label:"Додати клас",iconPos:"right",size:"small"})])])):(u(),c("div",Q,[t[5]||(t[5]=d("p",{class:"mb-4"},"Ви ще не додали жодного предмету",-1)),s(i,{onClick:k,icon:"pi pi-plus",label:"Додати предмет",iconPos:"right",size:"small"})]))]))],64)}}};export{oe as default};
